<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&family=Jua&family=Lobster&family=Nanum+Pen+Script&family=Permanent+Marker&family=Single+Day&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"> 
    <style>
        body * {
            font-family: 'Jua';
        }
        
        .calendar {
			margin-top: 30px;
		}
		
		.calendar table{
			width: 600px;
			border: 6px groove gray;
		}
		
		.calendartable thead tr {
			height: 50px;
		}
		
		.calendartable tbody tr {
			height: 60px;
		}
		
		.calendar table thead tr th{
			font-size: 22px;
			background-color: coral;
			color: blue;
			text-align: center;
			border-bottom: 3px doubele gray;
		}
    </style>
    <script>
      // 연도, 월을 입력하면 달력을 출력하는 페이지 만들기 혹은 변경하기
      
      // 요일(일...토)을 출력하는 행은 배경색 주기 

      // 요일, 일이 일요일이면 텍스트도 빨간색, 토요일이면 파란색으로 글자색 주기

      // 마지막 일까지 출력했다면, 더 이상 칸을 생성하지 않아야 한다(해당 월을 마지막에는 1칸으로 보이도록 해야함)

      // 연도, 월 필드에 유효한 값을 입력하는 지 검사해야 한다, 연도(1~2400 사이), 월(1~12사이)의 숫자입력
        
      // 연도, 월 필드에서 Enter 키를 입력해도 달력을 출력할 수 있도록 한다.

      // 심화(페이지가 로드될 때, 현재 월의 달력을 출력 오늘 날짜를 강조)

      // 연도, 월 입력값이 위의 조건을 벗어나면 경고하는 이벤트

	window.onload = function() {
		//달력을 출력하는 함수
			calendarview();
			document.querySelector(".selyear").onchange = function(){
				curyear = Number(this.value);
				calendarview();
			} 
				
			//월 변경 이벤트
			document.querySelector(".selmonth").onchange = function(){
				curmonth = Number(this.value);
				calendarview();
			} 
					

		
		//달력을 출력하는 함수
		function calendarview() {
					
		console.log(curyear,curmonth);
		//요일 숫자(해당월의 1일의 요일)
		let date2 = new Date(curyear,curmonth-1,1);
		let weekday = date2.getDay();
		console.log("1일 요일:"+weekday);
		
		//해당 년도의 해당월이 몇일까지 있는지 구하기
		let endday;
		switch(curmonth){
			case 2:{
			    endday = (curyear%4 == 0) && (curyear %100!= 0) || (curyear%400 == 0) ?29:28;
			    break;
			    }
			case 4:{
				
			}
			case 6:{
				
			}
			case 9:{
				
			}
			case 11:{
				endday=30;
			 	break;

			}
			 	default:
				endday=31;
		}
		console.log("endday:"+endday);
		let s=
			`
			<table class="table table-bordered">
				 <caption align="top"><h3>${curyear}년 ${curmonth}월 달력</h3></caption>
				 <thead>
					 <tr>
						 <th>일</th><th>월</th><th>화</th><th>수</th>
						 <th>목</th><th>금</th><th>토</th>
					</tr>
				 </thead>
				 <tbody>
			`;
			
		//앞에 빈칸부분
		s += "<tr>";
		for (let i = 1; i <= weekday; i++) {
			s += "<td></td>";
		}
		//1~enddy 까지 출력( 단 토요일은 </tr><tr>)
		for (let i = 1; i <= endday; i++) {
			++weekday;
			//출력 후 요일 숫자를 7의 배수일 때 tr 닫기
			s += `<td>${i}</td>`;
			if (weekday%7 == 0) {
				s += `</tr><tr>`;
			} else if (weekday%7==0 && i==endday) {
				s += "</tr>";
			}
		}
		
		//나머지칸 그리기(위에서 토요일까지 칸이 그려지지 않은경우에만 해당)
		let n = 1;
		if(weekday %7 !=0) {
			while(true) {
				weekday++;
				s += `<td style ="color:#ccc;">${n++}</td>`;
				if(weekday %7 == 0){
				break;
				}
			}
			s += "</tr>"
		}
		

	   s += "</tbody></table>";
	   
	   document.querySelector(".calendar").innerHTML=s;
		
			}
		}
</script>
</head>
<body>
	<script>
		//현재 년도 구하기
		let date = new Date();
		let curyear = date.getFullYear();
		let curmonth = date.getMonth()+1;
		console.log(curyear, curmonth);
	</script>
	<div style = "margin:50px";>
		<div class = "input-group" style = "width:300px";>
			<select class = "form-select selyear">
			
		<script>
			for (let i = curyear; i >= 1950; i--) {
				document.write(`<option>${i}</option>`);
				}
		</script>
		</select>
		년	
		&nbsp;
		<select class = "form-select selmonth" style = "width: 100px;">
			<script>
			for (let i = 1; i <= 12; i++) {
				if(i == curmonth) {
					document.write(`<option selected>${i}</option>`);
				} else {
					document.write(`<option>${i}</option>`);
				}
			}
			</script>
		</select>
		월
		</div>
		<div class ="calendar"></div>
	</div>
</body>
</html>